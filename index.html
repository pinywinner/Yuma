<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Holy of Holies: A Descent into the Chamber</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Hebrew:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        /* Base styling */
        body {
            background-color: #0c0c0c;
            color: #e0e0e0;
            font-family: 'Assistant', sans-serif;
            overflow-x: hidden;
        }
        .font-serif {
            font-family: 'Noto Serif Hebrew', serif;
        }
        /* Glow and shadow effects */
        .text-shadow-gold {
            text-shadow: 0 0 8px rgba(255, 215, 0, 0.7), 0 0 12px rgba(251, 191, 36, 0.6);
        }
        .card-glow {
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.3), 0 0 25px rgba(251, 191, 36, 0.2);
        }
        .card-glow-red {
             box-shadow: 0 0 15px rgba(220, 50, 47, 0.5), 0 0 25px rgba(220, 50, 47, 0.4);
        }
        .card-glow-blue {
             box-shadow: 0 0 15px rgba(59, 130, 246, 0.5), 0 0 25px rgba(59, 130, 246, 0.4);
        }
        
        /* Animation states */
        .fade-in-section {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .timeline-item-content {
            opacity: 0;
            transform: translateX(var(--direction, 50px));
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .timeline-item.is-visible .timeline-item-content {
            opacity: 1;
            transform: translateX(0);
        }
        
        .timeline-dot {
            transform: scale(0);
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .timeline-item.is-visible .timeline-dot {
            transform: scale(1);
        }

        /* Finale Canvas Styling */
        #finale-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #0c0c0c;
            z-index: 40;
            opacity: 0;
            transition: opacity 1s ease-in;
        }
        #finale-canvas.is-active {
            opacity: 1;
        }
    </style>
</head>
<body class="bg-[#0c0c0c]">

    <!-- Hero Section -->
    <header id="hero" class="h-screen w-full flex flex-col items-center justify-center text-center text-white sticky top-0 -z-10">
        <div class="absolute inset-0 bg-black opacity-70"></div>
        <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-black"></div>
        <h1 class="text-6xl md:text-9xl font-serif font-extrabold tracking-tighter text-shadow-gold z-10">יוֹמָא</h1>
        <h2 class="text-2xl md:text-4xl mt-4 font-light text-gray-200 z-10">שבעה ימים בלשכת פרהדרין</h2>
        <p class="mt-8 text-lg text-amber-400 z-10 animate-pulse">גְלֹל מַטָה כְּדֵי לְהִכָּנֵס</p>
    </header>

    <main id="content" class="relative z-20 bg-[#0c0c0c]">
        <div style="height: 100vh;"></div> <!-- Spacer for the hero section -->

        <!-- All previous sections remain here... -->
        <section class="min-h-screen w-full flex flex-col items-center justify-center p-8 md:p-16 fade-in-section">
            <h2 class="text-3xl md:text-5xl font-serif max-w-4xl text-center leading-relaxed">
                "שִׁבְעַת יָמִים קֹדֶם יוֹם הַכִּפּוּרִים, מַפְרִישִׁין כֹּהֵן גָּדוֹל מִבֵּיתוֹ לְלִשְׁכַּת פַּרְהֶדְרִין."
            </h2>
            <p class="mt-8 text-xl text-gray-400 max-w-2xl text-center">
                זו לא רק הפרדה פיזית. זהו מסע אל לב הקדושה, כור היתוך רוחני, פוליטי ופסיכולוגי. שבעה ימים של בידוד, לחץ וטהרה מוחלטת.
            </p>
        </section>

        <section id="timeline-section" class="min-h-screen w-full flex flex-col items-center justify-center p-8 md:p-16 fade-in-section">
            <h3 class="text-4xl md:text-6xl font-serif text-amber-400 text-shadow-gold mb-16">ציר הזמן: הספירה לאחור</h3>
            <div class="w-full max-w-4xl relative">
                <div class="absolute top-0 bottom-0 left-1/2 -ml-[1.5px] w-3 bg-amber-400/20 rounded-full"></div>
                <div id="timeline-progress" class="absolute top-0 left-1/2 -ml-[1.5px] w-3 bg-amber-400 rounded-full" style="height: 0%;"></div>
            </div>
        </section>

        <section class="min-h-screen w-full flex flex-col items-center justify-center p-8 md:p-16 fade-in-section">
            <h3 class="text-4xl md:text-6xl font-serif text-amber-400 text-shadow-gold mb-16 text-center">תוכניות מגירה: היערכות לאסון</h3>
            <div class="grid md:grid-cols-2 gap-8 max-w-6xl">
                <div class="p-8 rounded-2xl border border-white/10 bg-black/30 card-glow h-full flex flex-col">
                    <h4 class="text-3xl font-bold font-serif text-amber-400 mb-4">כהן תחתיו</h4>
                    <p class="text-lg italic text-gray-300 border-r-4 border-amber-400/50 pr-4 mb-4">"מַתְקִינִין לוֹ כֹּהֵן אַחֵר תַּחְתָּיו, שֶׁמָּא יֶאֱרַע בּוֹ פְּסוּל."</p>
                    <p class="text-md text-gray-400 leading-relaxed flex-grow">החשש הקיומי: טומאה פתאומית שתפסול את הכהן. 'תוכנית הגיבוי' היא כהן נוסף, מוכן 'במצב הכן' בצל, מוכן להיכנס לנעליים הגדולות ביותר בעולם ברגע של משבר. צל שמאיים ומבטיח בו זמנית.</p>
                </div>
                <div class="p-8 rounded-2xl border border-white/10 bg-black/30 card-glow-red h-full flex flex-col">
                    <h4 class="text-3xl font-bold font-serif text-red-500 mb-4">אשה אחרת: המחלוקת</h4>
                    <p class="text-lg italic text-gray-300 border-r-4 border-red-500/50 pr-4 mb-4">'רַבִּי יְהוּדָה אוֹמֵר: אַף אִשָּׁה אַחֶרֶת מַתְקִינִין לוֹ... אָמְרוּ לוֹ: אִם כֵּן, אֵין לַדָּבָר סוֹף!'</p>
                    <p class="text-md text-gray-400 leading-relaxed flex-grow">הכפרה תלויה ב"וְכִפֶּר בַּעֲדוֹ וּבְעַד בֵּיתוֹ" - וביתו זו אשתו. רבי יהודה דורש גיבוי גם לאשתו. חכמים משיבים בטיעון לוגי צונן: זהו מדרון חלקלק. המחלוקת חושפת את הגבול בין היערכות ראויה לפסימיות אבסורדית.</p>
                </div>
            </div>
        </section>

        <section class="min-h-screen w-full flex flex-col items-center justify-center p-8 md:p-16 bg-black/50 fade-in-section">
            <h3 class="text-4xl md:text-6xl font-serif text-red-500 text-shadow-lg mb-12 text-center">העימות: פרושים נגד צדוקים</h3>
            <div class="w-full max-w-5xl p-8 bg-gray-900/50 rounded-2xl border border-red-500/50 card-glow-red">
                 <h4 class="text-3xl font-bold text-center mb-4">נקודת הרתיחה: הקטורת</h4>
                 <p class="text-center text-lg text-gray-300 mb-8">הוויכוח לא היה טכני, הוא היה תהום תיאולוגית. היכן מתחיל הרגע הקדוש ביותר?</p>
                 <div class="flex flex-col md:flex-row justify-between items-center gap-8">
                     <div class="w-full md:w-1/2 text-center p-6 border-2 border-amber-400/50 rounded-lg bg-black/30">
                         <h5 class="text-2xl font-bold text-amber-400 mb-2">דעת הפרושים (ההלכה)</h5>
                         <p class="text-lg">"יַכְנִיס אֶת הַמַּחְתָּה וְאֶת הַכַּף, וְרַק אָז יַעֲלֶה עָשָׁן בִּפְנִים."</p>
                     </div>
                     <div class="w-full md:w-1/2 text-center p-6 border-2 border-red-500/50 rounded-lg bg-black/30">
                         <h5 class="text-2xl font-bold text-red-500 mb-2">דעת הצדוקים</h5>
                         <p class="text-lg">"יַקְטִיר מִבַּחוּץ וְיִכָּנֵס עִם הֶעָשָׁן."</p>
                     </div>
                 </div>
                 <div class="mt-8 text-center">
                     <h5 class="text-2xl font-bold text-yellow-200">הפתרון הדרמטי: השבועה</h5>
                     <p class="text-lg mt-2 max-w-2xl mx-auto">"מַשְׁבִּיעִין אָנוּ עָלֶיךָ בְּמִי שֶׁשִּׁכֵּן שְׁמוֹ בַּבַּיִת הַזֶּה, שֶׁלֹּא תְּשַׁנֶּה דָּבָר מִכָּל מַה שֶּׁאָמַרְנוּ לָךְ."</p>
                 </div>
            </div>
        </section>


        <footer id="pre-finale-footer" class="text-center p-16 bg-black fade-in-section relative z-30">
            <h3 class="text-3xl font-serif text-amber-400 mb-4">היציאה מהלשכה</h3>
            <p class="text-lg text-gray-400 max-w-3xl mx-auto">
                הכהן הגדול יוצא מהבידוד לא כפי שנכנס. הוא אינו רק טהור טכנית; הוא עבר כור היתוך. הוא התמודד עם לחץ, ספק, מחלוקת פוליטית והאחריות הכבדה ביותר.
            </p>
        </footer>
        
        <!-- THE FINALE SECTION -->
        <section id="finale" class="relative h-screen w-full bg-[#0c0c0c]">
            <canvas id="finale-canvas"></canvas>
            <div id="finale-text" class="absolute inset-0 flex items-center justify-center text-center opacity-0 transition-opacity duration-1000" style="z-index: 50;">
                <h2 class="text-4xl md:text-6xl font-serif text-amber-300 text-shadow-gold">הוּא מוּכָן.</h2>
            </div>
        </section>

    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Intersection Observer for fade-in animations ---
        const sections = document.querySelectorAll('.fade-in-section');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, { threshold: 0.1 });

        sections.forEach(section => observer.observe(section));

        // --- Hero Section parallax scroll effect ---
        const hero = document.getElementById('hero');
        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            hero.style.opacity = Math.max(0, 1 - scrollY / (window.innerHeight * 0.7));
        });

        // --- Timeline scroll-linked animation ---
        const timelineSection = document.getElementById('timeline-section');
        if (timelineSection) {
            const timelineContainer = timelineSection.querySelector('.w-full.max-w-4xl');
            const itemsData = [
                { day: 7, title: "ההפרשה", desc: "הכהן הגדול מועבר מביתו הפרטי אל לשכת פרהדרין. ניתוק מוחלט מהעולם החיצון." },
                { day: 6, title: "לימוד הלכות", desc: "זקני הסנהדרין מלמדים אותו את סדר עבודת היום. כל פרט נסקר שוב ושוב." },
                { day: 5, title: "הזאות וטהרה", desc: "מזים עליו כל שבעת הימים מאפר פרה אדומה, למקרה שנטמא בטומאת מת מבלי שידע." },
                { day: 4, title: "תרגול מעשי", desc: "הוא מתרגל את העבודות: חפינת הקטורת, הולכת הדם. השרירים זוכרים את מה שהנפש חרדה ממנו." },
                { day: 3, title: "לחץ פסיכולוגי", desc: "האחריות על כפרת העם כולו מתחילה להכביד. המעמד דורש חוסן נפשי אדיר." },
                { day: 2, title: "העימות עם הצדוקים", desc: "החשש מפני שינוי סדר הקטורת מגיע לשיאו. הלחץ הפוליטי מתווסף ללחץ הרוחני." },
                { day: 1, title: "השבועה והבכי", desc: "ערב יום כיפור. משביעים אותו שיעשה כמסורת הפרושים. הוא בוכה, והם בוכים. משקל הדורות על כתפיו." },
            ];

            itemsData.forEach((item, index) => {
                const isReversed = index % 2 !== 0;
                const itemWrapper = document.createElement('div');
                itemWrapper.className = `timeline-item mb-12 flex items-center w-full ${isReversed ? 'flex-row-reverse' : ''}`;
                
                itemWrapper.innerHTML = `
                    <div class="w-5/12 timeline-item-content p-4 bg-gray-900/70 rounded-lg border border-amber-400/30" style="--direction: ${isReversed ? '50px' : '-50px'}">
                        <p class="font-bold text-lg text-amber-400">${item.title} (יום ${item.day})</p>
                        <p class="text-gray-300">${item.desc}</p>
                    </div>
                    <div class="w-2/12 flex justify-center">
                        <div class="timeline-dot w-6 h-6 rounded-full bg-black border-2 border-amber-400 z-10"></div>
                    </div>
                    <div class="w-5/12"></div>
                `;
                timelineContainer.appendChild(itemWrapper);
            });

            const timelineItems = document.querySelectorAll('.timeline-item');
            const timelineObserver = new IntersectionObserver((entries) => {
                 entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.5 });
            
            timelineItems.forEach(item => timelineObserver.observe(item));

            const timelineProgressEl = document.getElementById('timeline-progress');
            window.addEventListener('scroll', () => {
                const rect = timelineSection.getBoundingClientRect();
                const start = rect.top + window.scrollY;
                const progress = (window.scrollY - start) / (rect.height - window.innerHeight);
                const clampedProgress = Math.max(0, Math.min(1, progress));
                
                if (timelineProgressEl) {
                   timelineProgressEl.style.height = `${clampedProgress * 100}%`;
                }
            });
        }

        // --- Finale Canvas Animation ---
        const finaleSection = document.getElementById('finale');
        const canvas = document.getElementById('finale-canvas');
        const finaleText = document.getElementById('finale-text');
        const ctx = canvas.getContext('2d');
        let animationFrameId;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        let triangles = [];
        let animationState = 'idle';

        function initFinale() {
            resizeCanvas();
            triangles = [];
            const rows = 20;
            const cols = 20;
            const cellWidth = canvas.width / cols;
            const cellHeight = canvas.height / rows;

            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const x = j * cellWidth;
                    const y = i * cellHeight;
                    // Create two triangles for each cell to form a rectangle
                    triangles.push(new Triangle(x, y, x + cellWidth, y, x, y + cellHeight, '#0c0c0c'));
                    triangles.push(new Triangle(x + cellWidth, y, x + cellWidth, y + cellHeight, x, y + cellHeight, '#0c0c0c'));
                }
            }
        }

        class Triangle {
            constructor(x1, y1, x2, y2, x3, y3, color) {
                this.p1 = { x: x1, y: y1 };
                this.p2 = { x: x2, y: y2 };
                this.p3 = { x: x3, y: y3 };
                this.color = color;
                this.alpha = 1;
                this.vx = (Math.random() - 0.5) * 10;
                this.vy = (Math.random() - 0.5) * 10;
                this.rotation = 0;
                this.vr = (Math.random() - 0.5) * 0.1;
            }

            draw() {
                if (this.alpha <= 0) return;
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                
                const cx = (this.p1.x + this.p2.x + this.p3.x) / 3;
                const cy = (this.p1.y + this.p2.y + this.p3.y) / 3;
                
                ctx.translate(cx, cy);
                ctx.rotate(this.rotation);
                ctx.translate(-cx, -cy);

                ctx.beginPath();
                ctx.moveTo(this.p1.x, this.p1.y);
                ctx.lineTo(this.p2.x, this.p2.y);
                ctx.lineTo(this.p3.x, this.p3.y);
                ctx.closePath();
                ctx.fill();
                ctx.restore();
            }

            shatter() {
                this.p1.x += this.vx; this.p1.y += this.vy;
                this.p2.x += this.vx; this.p2.y += this.vy;
                this.p3.x += this.vx; this.p3.y += this.vy;
                this.rotation += this.vr;
                this.alpha -= 0.01;
            }
        }

        function animateFinale() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            let allFaded = true;
            triangles.forEach(t => {
                t.shatter();
                t.draw();
                if (t.alpha > 0) allFaded = false;
            });
            
            if (allFaded) {
                cancelAnimationFrame(animationFrameId);
                animationState = 'finished';
                finaleText.style.opacity = 1;
            } else {
                animationFrameId = requestAnimationFrame(animateFinale);
            }
        }

        const finaleObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && animationState === 'idle') {
                    animationState = 'running';
                    canvas.classList.add('is-active');
                    setTimeout(() => {
                        initFinale();
                        triangles.forEach(t => t.draw());
                        setTimeout(() => {
                            animationFrameId = requestAnimationFrame(animateFinale);
                        }, 500); // Wait a moment before shattering
                    }, 500); // Wait for canvas to fade in
                }
            });
        }, { threshold: 0.8 });

        if(finaleSection) {
            finaleObserver.observe(finaleSection);
        }
        window.addEventListener('resize', () => {
            if(animationState !== 'running') {
                resizeCanvas();
            }
        });

    });
    </script>
</body>
</html>

